<!DOCTYPE html>
<html>

<head>
  <title>Express</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
  <h1>Backend de WAP</h1>
  <hr />

  <!-- /users -->

  <h2 class="done">GET /users</h2>
  <h4 class="done">optional : req.query : { longitude, latitude, longitudeDelta, latitudeDelta } </h4>
  <h4 class="done">Tous les users</h4>
  <h4 class="done">response : { result : true, data: [usersData] }, retourne toujours true, avec data:[]</h4>
  <hr />

  <h2 class="done">GET /users/id</h2>
  <h4 class="done">id = user_id</h4>
  <h4 class="done">Toutes les infos (populate) d'un user</h4>
  <h4 class="done">response : { result : boolean, data: userDatas }</h4>
  <hr />

  <h2 class="done">GET /users/me/token</h2>
  <h4 class="done">token = token</h4>
  <h4 class="done">Toutes les infos (populate) de l'user connecté</h4>
  <h4 class="done">response : { result : boolean, data: userDatas }</h4>
  <hr />

  <h2 class="done">POST /users/signup</h2>
  <h4 class="done">params dans le req.body</h4>
  <h4 class="done">Création d'un nouvel utilisateur</h4>
  <h4 class="done">response : { result : boolean, data : userDatas }</h4>
  <hr />

  <h2 class="done">POST /users/signin</h2>
  <h4 class="done">params email et password</h4>
  <h4 class="done">Login utilisateur existant</h4>
  <h4 class="done">response : { result : boolean, data : userDatas }</h4>
  <hr />

  <h2 class="done">POST /users/checkmail</h2>
  <h4 class="done">param req.body : { email }</h4>
  <h4 class="done">Vérifie l'existence d'un mail avant le sign up</h4>
  <h4 class="done">response : { result : boolean }</h4>
  <hr />

  <h2 class="done">PUT /users/id</h2>
  <h4 class="done">id = token , req.body</h4>
  <h4 class="done">Modification d'un utilisateur</h4>
  <h4 class="done">response : { result : boolean, data: data }</h4>
  <hr />

  <h2 class="todo">PUT /users/id/photo</h2>
  <h4 class="todo">id = token , req.body : { formData } // nom de la photo : 'userPhoto'</h4>
  <h4 class="todo">Modification de la photo d'un utilisateur</h4>
  <h4 class="todo">response : { result : boolean, data: userDatas }</h4>
  <hr />
  
  <h2 class="todo">DELETE /users/id</h2>
  <h4 class="todo">id = token</h4>
  <h4 class="todo">Delete d'un utilisateur</h4>
  <h4 class="todo">response : { result : boolean, data: data }</h4>
  <hr />
  
  <h2 class="done">PUT /users/id/status</h2>
  <h4 class="done">id = token</h4>
  <h4 class="done">Met a jours le status utilisateur (home, walk, pause)</h4>
  <h4 class="done">response : { result : boolean, data: data }</h4>
  <hr />
  
  <h2 class="done">PUT /users/id/newdog</h2>
  <h4 class="done">id = token , req.body : { dog_id }</h4>
  <h4 class="done">Add a dog in users dogs list</h4>
  <h4 class="done">response : { result : boolean, data: userDogs }</h4>
  <hr />

  <!-- /dogs -->

  <h2 class="done">GET /dogs/id</h2>
  <h4 class="done">params id = user token</h4>
  <h4 class="done">Liste des chiens de l'user token</h4>
  <h4 class="done">response : { result : boolean, data: [userDogs] }</h4>
  <hr />

  <h2 class="done">POST /dogs</h2>
  <h4 class="done">params</h4>
  <h4 class="done">Création d'un nouveau chien</h4>
  <h4 class="done">response : { result : boolean, data: newDog }</h4>
  <hr />

  <h2 class="done">PUT /dogs/id</h2>
  <h4 class="done">params id = user_token, req.body : { _id: dog_id , ...dogInfos}</h4>
  <h4 class="done">Update les infos d'un chien { name, photo, sex, race, birthday, chipid }</h4>
  <h4 class="done">response : { result : boolean, dog }</h4>
  <hr />

  <h2 class="done">PUT /dogs/id/status</h2>
  <h4 class="done">params id = user_token , req.body { _id: dog_id, status: string , isTaken:boolean }</h4>
  <h4 class="done">Mise a jour du status du chien</h4>
  <h4 class="done">response : { result : boolean, dog }</h4>
  <hr />

  <h2 class="todo">PUT /dogs/id/photo</h2>
  <h4 class="todo">id = token , req.body : { ... }</h4>
  <h4 class="todo">Modification de la photo d'un chien</h4>
  <h4 class="todo">response : { result : boolean, dog }</h4>
  <hr />

  <h2 class="done">DELETE /dogs/id</h2>
  <h4 class="done">params id = user_token, req.body: { _id: dog_id }</h4>
  <h4 class="done">Supprimer un chien</h4>
  <h4 class="done">response : { result : boolean, userDogs }</h4>
  <hr />

  <!-- places -->

  <h2 class="done">GET /places</h2>
  <h4 class="done">params</h4>
  <h4 class="done">Liste des lieux (optional query:longitude, latitude, longitudeDelta, latitudeDelta)</h4>
  <h4 class="done">response : { result : boolean }</h4>
  <hr />

  <h2 class="done">POST /places</h2>
  <h4 class="done">req.body : { name, houseNumber, street, postcode, city, longitude, latitude, description, type }</h4>
  <h4 class="done">Ajout d'un nouveau lieu</h4>
  <h4 class="done">response : { result : boolean, data: data }</h4>
  <hr />

  <h2 class="todo">PUT /places</h2>
  <h4 class="todo">params</h4>
  <h4 class="todo">Modif d'un lieu</h4>
  <h4 class="todo">response : { result : boolean, data: data }</h4>
  <hr />

  <!-- friends -->

  <h2 class="done">GET /friends/id</h2>
  <h4 class="done">params id = user token</h4>
  <h4 class="done">Liste des amis de l'user token</h4>
  <h4 class="done">response : { result : boolean, data: {accepted:[],incoming:[],outcoming:[],blocked:[]} }</h4>
  <hr />

  <h2 class="done">GET /friends/id/incomming</h2>
  <h4 class="done">params id = token</h4>
  <h4 class="done">Liste des demandes reçues</h4>
  <h4 class="done">response : { result : boolean, incoming: [] }</h4>
  <hr />
  
  <h2 class="done">GET /friends/id/outcomming</h2>
  <h4 class="done">params id = token</h4>
  <h4 class="done">Liste des demandes envoyées</h4>
  <h4 class="done">response : { result : boolean, outcoming: [] }</h4>
  <hr />
  
  <h2 class="done">POST /friends/id/outcomming</h2>
  <h4 class="done">params id = token, req.body = {friendFrom, friendTo} (mongodb_ids)</h4>
  <h4 class="done">Envoyer une demande d'ami</h4>
  <h4 class="done">response : { result : boolean, userFromFriends, userToFriends }</h4>
  <hr />

  <h2 class="done">PUT /friends/id/outcoming</h2>
  <h4 class="done">params id = token, req.body : { friendTo:_id }</h4>
  <h4 class="done">Annuler l'envoi d'une demande</h4>
  <h4 class="done">response : { result : boolean, userFromFriends, userToFriends }</h4>
  <hr />

  <h2 class="done">PUT /friends/id/incomming</h2>
  <h4 class="done">params id = token, req.body : { friendFrom:_id, accept:true|false }</h4>
  <h4 class="done">Accepter ou refuser une demande</h4>
  <h4 class="done">response : { result : boolean, userFromFriends, userToFriends }</h4>
  <hr />
  
  <h2 class="done">DELETE /friends/id</h2>
  <h4 class="done">params id = token, req.body : { friendToDelete:_id }</h4>
  <h4 class="done">Supprimer un ami</h4>
  <h4 class="done">response : { result : boolean, userFriends, userToDeleteFriends }</h4>
  <hr />

  <h2 class="done">POST /friends/id/block</h2>
  <h4 class="done">params id = token, req.body : { friendToBlock:_id }</h4>
  <h4 class="done">Bloquer une personne (ami ou non)</h4>
  <h4 class="done">response : { result : boolean, userFriends, userToBlockFriends }</h4>
  <hr />

  <h2 class="done">DELETE /friends/id/block</h2>
  <h4 class="done">params id = token, req.body : { friendToUnBlock:_id }</h4>
  <h4 class="done">Retirer une personne de la liste de blocage</h4>
  <h4 class="done">response : { result : boolean, userFriends, userToUnBlockFriends }</h4>
  <hr />

  <h2 class="done">GET /generatedata/dogs/:nbDogs</h2>
  <h4 class="done">nbDogs : nombre de chiens à générer</h4>
  <h4 class="done">génère le nombre de chien voulu dans la bdd</h4>
  <h4 class="done">response : {"status": "xxx dogs created in bdd"}</h4>
  <hr />

  <h2 class="done">GET /generatedata/users/:nbUsers</h2>
  <h4 class="done">nbUsers : nombre d'utilisateurs à générer</h4>
  <h4 class="done">génère le nombre d'utilisiateurs voulu dans la bdd</h4>
  <h4 class="done">response : {"status": "xxx users created in bdd"}</h4>
  <hr />


</body>

</html>